From 83b48fccc0802d73abe3789013a0647253029311 Mon Sep 17 00:00:00 2001
From: gl-tanqi <qi.tan@gl-inet.com>
Date: Mon, 25 Oct 2021 17:22:06 +0800
Subject: [PATCH] fix: Release_note displayed on the Web does not have a
 carriage return newline

---
 include/image-commands.mk | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/include/image-commands.mk b/include/image-commands.mk
index b914c7dcdd..a6ee31bb9f 100644
--- a/include/image-commands.mk
+++ b/include/image-commands.mk
@@ -398,7 +398,7 @@ metadata_gl_json = \
 			"board": "$(call json_quote,$(if $(BOARD_NAME),$(BOARD_NAME),$(DEVICE_NAME)))" \
 		}, \
 		"upgrade_control":$(shell python3 $(TOPDIR)/make_gl_metadata.py), \
-		"release_note":"$(shell cat $(TOPDIR)/gl_release_note)" \
+		"release_note":"$(shell sed ':a;N;s/\n/\\n/g;s/\r/\\r/g;ta' $(TOPDIR)/gl_release_note)" \
 	}'
 
 define Build/append-gl-metadata
-- 
2.17.1

